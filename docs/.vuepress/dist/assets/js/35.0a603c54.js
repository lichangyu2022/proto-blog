(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{518:function(s,a,l){"use strict";l.r(a);var t=l(31),n=Object(t.a)({},(function(){var s=this,a=s.$createElement,l=s._self._c||a;return l("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[l("h1",{attrs:{id:"mysql安装"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#mysql安装"}},[s._v("#")]),s._v(" MySQL安装")]),s._v(" "),l("p",[s._v("MySQL是目前最为流行的开放源码的数据库，是完全网络化的跨平台的关系型数据库系统，它是由瑞典MySQLAB公司开发，目前属于Oracle公司。任何人都能从Internet下载MySQL软件，而无需支付任费用，并且“开放源码”意味着任何人都可以使用和修改该软件。"),l("strong",[s._v("这里安装方式采用本地压缩包安装，如需图形界面向导方式安装需自行百度。")])]),s._v(" "),l("h2",{attrs:{id:"window下安装"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#window下安装"}},[s._v("#")]),s._v(" window下安装")]),s._v(" "),l("p",[s._v("压缩包下载地址为:"),l("a",{attrs:{href:"https://dev.mysql.com/downloads/mysql",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://dev.mysql.com/downloads/mysql"),l("OutboundLink")],1)]),s._v(" "),l("p",[l("img",{attrs:{src:"https://cdn.staticaly.com/gh/lichangyu2022/blog-imgs@master/20220928/%E5%AE%89%E8%A3%85.nfr5r50fdeo.webp",alt:"安装"}})]),s._v(" "),l("ol",[l("li",[s._v("解压压缩包")])]),s._v(" "),l("p",[l("img",{attrs:{src:"https://cdn.staticaly.com/gh/lichangyu2022/blog-imgs@master/20220928/%E5%AE%89%E8%A3%85%E7%9B%AE%E5%BD%95.6c3f6xo7qog0.webp",alt:"安装目录"}})]),s._v(" "),l("ol",[l("li",[s._v("根目录下创建my.ini文件,将代码复制到文件中")])]),s._v(" "),l("div",{staticClass:"language- extra-class"},[l("pre",[l("code",[s._v("[Client]\nport = 3306\n[mysqld]\n#设置3306端口\nport = 3306\n# 设置mysql的安装目录\nbasedir=D:\\mysql-5.7.20-winx64\n# 设置mysql数据库的数据的存放目录\ndatadir=D:\\mysql-5.7.20-winx64\\data\n# 允许最大连接数\nmax_connections=200\n# 服务端使用的字符集默认为8比特编码的latin1字符集\ncharacter-set-server=utf8\n# 创建新表时将使用的默认存储引擎\ndefault-storage-engine=INNODB\n[mysql]\n# 设置mysql客户端默认字符集\ndefault-character-set=utf8\n")])])]),l("ol",[l("li",[s._v("初始化mysql，DOS窗口进入bin目录，记得用管理员启动，输入命令：")])]),s._v(" "),l("div",{staticClass:"language- extra-class"},[l("pre",[l("code",[s._v("mysqld --initialize --user=mysql --console\n")])])]),l("p",[l("img",{attrs:{src:"https://cdn.staticaly.com/gh/lichangyu2022/blog-imgs@master/20220928/%E5%91%BD%E4%BB%A4%E8%A1%8C.4p9ybviq77u0.webp",alt:"命令行"}})]),s._v(" "),l("ol",[l("li",[s._v("初始化成功后，会在mysql目录下创建data文件夹，并生成初始密码，密码先复制保存出来")])]),s._v(" "),l("p",[l("img",{attrs:{src:"https://cdn.staticaly.com/gh/lichangyu2022/blog-imgs@master/20220928/%E5%AF%86%E7%A0%81.37c57w85ico0.webp",alt:"密码"}})]),s._v(" "),l("ol",[l("li",[s._v("安装mysql，显示successfully installed即为安装成功")])]),s._v(" "),l("div",{staticClass:"language- extra-class"},[l("pre",[l("code",[s._v("mysqld -—install mysql\n")])])]),l("ol",[l("li",[s._v("启动mysql")])]),s._v(" "),l("div",{staticClass:"language- extra-class"},[l("pre",[l("code",[s._v("net start mysql\n")])])]),l("ol",[l("li",[s._v("登录，输入启动命令，回车输入初始密码，既可进入mysql")])]),s._v(" "),l("div",{staticClass:"language- extra-class"},[l("pre",[l("code",[s._v("mysql -u root -p \n")])])]),l("ol",[l("li",[s._v("修改登录密码，有多种方式，这里采用直接update user表")])]),s._v(" "),l("div",{staticClass:"language- extra-class"},[l("pre",[l("code",[s._v('set password=password("password");\nflush privileges;\n')])])]),l("ol",[l("li",[s._v("配置环境变量")])]),s._v(" "),l("p",[s._v("9.1 新建系统变量 MYSQL_HOME （mysql根目录），并配置变量值为D:\\mysql-5.7.20-winx64；\n9.2 编辑系统变量 Path ，将 ;%MYSQL_HOME%\\bin 添加到 Path 变量值后面。")]),s._v(" "),l("ol",[l("li",[s._v("有条件的话去网上下载个客户端，sqlyang，Navicat等。")])]),s._v(" "),l("h3",{attrs:{id:"忘记root密码怎么办"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#忘记root密码怎么办"}},[s._v("#")]),s._v(" 忘记root密码怎么办")]),s._v(" "),l("ol",[l("li",[s._v("关闭mysql，DOS窗口进入bin目录输入命令，直接跳过权限认证")])]),s._v(" "),l("div",{staticClass:"language- extra-class"},[l("pre",[l("code",[s._v("mysqld --skip-grant-tables\n")])])]),l("ol",[l("li",[s._v("再开一个DOS窗口，进入bin目录，按照"),l("strong",[s._v("步骤8")]),s._v("进行修改")])]),s._v(" "),l("h2",{attrs:{id:"linux下安装"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#linux下安装"}},[s._v("#")]),s._v(" linux下安装")]),s._v(" "),l("ol",[l("li",[s._v("下载mysql包，下载地址同上，记得选linux版本")]),s._v(" "),l("li",[s._v("解压压缩包")])]),s._v(" "),l("div",{staticClass:"language- extra-class"},[l("pre",[l("code",[s._v("tar -zxvf mysql-5.7.35-linux-glibc2.12-x86_64.tar.gz\n")])])]),l("ol",[l("li",[s._v("修改my.cnf文件，同上my.ini")])]),s._v(" "),l("div",{staticClass:"language- extra-class"},[l("pre",[l("code",[s._v("vim /etc/my.cnf\n\n[Client]\nport = 3306\n[mysqld]\n#设置3306端口\nport = 3306\n# 设置mysql的安装目录\nbasedir=/usr/local/mysql\n# 设置mysql数据库的数据的存放目录\ndatadir=/data/mysql\nlog-error=/data/mysql/mysql.err\n# 允许最大连接数\nmax_connections=200\n# 服务端使用的字符集默认为8比特编码的latin1字符集\ncharacter-set-server=utf8\n# 创建新表时将使用的默认存储引擎\ndefault-storage-engine=INNODB\n[mysql]\n# 设置mysql客户端默认字符集\ndefault-character-set=utf8\n")])])]),l("ol",[l("li",[s._v("初始化，解压后的文件移动到/usr/local/mysql (文件夹名称修改为mysql)")])]),s._v(" "),l("div",{staticClass:"language- extra-class"},[l("pre",[l("code",[s._v("cd /usr/local/mysql/bin/\n\n./mysqld --defaults-file=/etc/my.cnf --basedir=/usr/local/mysql/ --datadir=/data/mysql/ --user=mysql --initialize\n")])])]),l("ol",[l("li",[s._v("查看初始密码")])]),s._v(" "),l("div",{staticClass:"language- extra-class"},[l("pre",[l("code",[s._v("cat /data/mysql/mysql.err\n")])])]),l("ol",[l("li",[s._v("启动")])]),s._v(" "),l("div",{staticClass:"language- extra-class"},[l("pre",[l("code",[s._v("cp /usr/local/mysql/support-files/mysql.server /etc/init.d/mysql\n\nservice mysql start\n")])])]),l("h3",{attrs:{id:"开启远程连接"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#开启远程连接"}},[s._v("#")]),s._v(" 开启远程连接")]),s._v(" "),l("ol",[l("li",[s._v("登录mysql")]),s._v(" "),l("li",[s._v("查看用户表，发现root用户的host值为localhost")])]),s._v(" "),l("div",{staticClass:"language- extra-class"},[l("pre",[l("code",[s._v("use mysql\nselect host, user from user;\n")])])]),l("p",[l("img",{attrs:{src:"https://cdn.staticaly.com/gh/lichangyu2022/blog-imgs@master/20220928/%E7%94%A8%E6%88%B7.51iryxl71zk0.webp",alt:"用户"}})]),s._v(" "),l("ol",[l("li",[s._v("修改用户  %表示的意思是所有机器都可以连接")])]),s._v(" "),l("div",{staticClass:"language- extra-class"},[l("pre",[l("code",[s._v("update user set host = '%' where user = 'root';\nflush privileges; # 如果没生效，可以重启mysql服务\n")])])]),l("h3",{attrs:{id:"binlog"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#binlog"}},[s._v("#")]),s._v(" binlog")]),s._v(" "),l("p",[s._v("当遇到删库跑路的崽种不要慌，快用bin-log 清热解毒滋阴补阳,mysql入门到放弃必备程序。"),l("br")]),s._v(" "),l("p",[s._v("binlog是Server层实现的二进制日志,他会记录我们的cud操作。Binlog有以下几个特点：")]),s._v(" "),l("ol",[l("li",[s._v("Binlog在MySQL的Server层实现（引擎共用）")]),s._v(" "),l("li",[s._v("Binlog为逻辑日志,记录的是一条语句的原始逻辑")]),s._v(" "),l("li",[s._v("Binlog不限大小,追加写入,不会覆盖以前的日志")])]),s._v(" "),l("h4",{attrs:{id:"开启bin-log"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#开启bin-log"}},[s._v("#")]),s._v(" 开启bin-log")]),s._v(" "),l("div",{staticClass:"language- line-numbers-mode"},[l("pre",{pre:!0,attrs:{class:"language-text"}},[l("code",[s._v("my.cnf\n\n配置开启binlog\nlog‐bin=/usr/local/mysql/data/binlog/mysql‐bin\n注意5.7以及更高版本需要配置本项：server‐id=123454（自定义,保证唯一性）;\n#binlog格式，有3种statement,row,mixed\nbinlog‐format=ROW\n#表示每1次执行写入就与硬盘同步，会影响性能，为0时表示，事务提交时mysql不做刷盘操作，由系统决定\nsync‐binlog=1\n\n")])]),s._v(" "),l("div",{staticClass:"line-numbers-wrapper"},[l("span",{staticClass:"line-number"},[s._v("1")]),l("br"),l("span",{staticClass:"line-number"},[s._v("2")]),l("br"),l("span",{staticClass:"line-number"},[s._v("3")]),l("br"),l("span",{staticClass:"line-number"},[s._v("4")]),l("br"),l("span",{staticClass:"line-number"},[s._v("5")]),l("br"),l("span",{staticClass:"line-number"},[s._v("6")]),l("br"),l("span",{staticClass:"line-number"},[s._v("7")]),l("br"),l("span",{staticClass:"line-number"},[s._v("8")]),l("br"),l("span",{staticClass:"line-number"},[s._v("9")]),l("br"),l("span",{staticClass:"line-number"},[s._v("10")]),l("br")])]),l("div",{staticClass:"language- extra-class"},[l("pre",[l("code",[s._v("show variables like '%log_bin%'; 查看bin‐log是否开启\nflush logs; 会多一个最新的bin‐log日志\nshow master status; 查看最后一个bin‐log日志的相关信息\nreset master; 清空所有的bin‐log日志\n")])])]),s._v(" "),l("div",{staticClass:"language- extra-class"},[l("pre",[l("code",[s._v("查看binlog内容\n /usr/local/mysql/bin/mysqlbinlog ‐‐no‐defaults /usr/local/mysql/data/binlog/mysql‐bin.\n000001 查看binlog内容\n")])])]),l("p",[s._v("binlog里的内容不具备可读性，所以需要我们自己去判断恢复的逻辑点位，怎么观察呢？看重点信息，比如begin,commit这种关键词信息，只要在binlog当中看到了，你就可以理解为"),l("strong",[s._v("begin-commit")]),s._v("之间的信息是一个完整的事务逻辑,然后再根据位置position判断恢复即可。")]),s._v(" "),l("h4",{attrs:{id:"数据归档操作"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#数据归档操作"}},[s._v("#")]),s._v(" 数据归档操作")]),s._v(" "),l("div",{staticClass:"language- line-numbers-mode"},[l("pre",{pre:!0,attrs:{class:"language-text"}},[l("code",[s._v('从bin‐log恢复数据\n恢复全部数据\n/usr/local/mysql/bin/mysqlbinlog ‐‐no‐defaults /usr/local/mysql/data/binlog/mysql‐bin.000001 |mysql ‐uroot ‐p proto(数据库名)\n\n恢复指定位置数据\n/usr/local/mysql/bin/mysqlbinlog ‐‐no‐defaults ‐‐start‐position="48" ‐‐stop‐position="75" /usr/local/mysql/data/binlog/mysql‐bin.000001 |mysql ‐uroot ‐p proto(数据库)\n\n\n恢复指定时间段数据\n/usr/local/mysql/bin/mysqlbinlog ‐‐no‐defaults /usr/local/mysql/data/binlog/mysql‐bin.000001 ‐‐stop‐date= "2022‐08‐30 12:00:00" ‐‐start‐date= "2022‐08‐30 12:00:00"|mysql ‐uroot ‐p proto(数据库)\n\n')])]),s._v(" "),l("div",{staticClass:"line-numbers-wrapper"},[l("span",{staticClass:"line-number"},[s._v("1")]),l("br"),l("span",{staticClass:"line-number"},[s._v("2")]),l("br"),l("span",{staticClass:"line-number"},[s._v("3")]),l("br"),l("span",{staticClass:"line-number"},[s._v("4")]),l("br"),l("span",{staticClass:"line-number"},[s._v("5")]),l("br"),l("span",{staticClass:"line-number"},[s._v("6")]),l("br"),l("span",{staticClass:"line-number"},[s._v("7")]),l("br"),l("span",{staticClass:"line-number"},[s._v("8")]),l("br"),l("span",{staticClass:"line-number"},[s._v("9")]),l("br"),l("span",{staticClass:"line-number"},[s._v("10")]),l("br"),l("span",{staticClass:"line-number"},[s._v("11")]),l("br")])]),l("hr"),s._v(" "),l("p",[s._v("title: MySQL安装\ndate: 2022-09-28 11:28:34\npermalink: /pages/0bc986/\ncategories:")]),s._v(" "),l("ul",[l("li",[s._v("数据库")]),s._v(" "),l("li",[s._v("MySQL\ntags:")]),s._v(" "),l("li")]),s._v(" "),l("h2",{attrs:{id:"author-name-protolink-https-github-com-lichangyu2022"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#author-name-protolink-https-github-com-lichangyu2022"}},[s._v("#")]),s._v(" author:\nname: Proto\nlink: https://github.com/lichangyu2022")])])}),[],!1,null,null,null);a.default=n.exports}}]);